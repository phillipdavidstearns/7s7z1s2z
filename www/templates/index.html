<html>

	<head>
		<title> Valence Control Panel</title>
		<meta charset="utf-8">
		<meta name="description" content="Control Panel for Valence by Tauba Auerbach">
		<meta name="author" content="Phillip David Stearns">
		<!-- Scripts -->
		<script src="static/jquery-3.5.1.min.js"></script>
		<script src="static/ws-client.js"></script>
		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="static/style.css"/>
	</head>

	<body>
		<div align="center">
			<h1>Valence Control Panel</h1><br />
			<form action="/logout">
				<button type="submit" id="logout">logout</button>
			</form>
			<hr />
			<table>
				<tr>
					<th>Current Status</th>
					<th>Change Settings</th>
				</tr>
				</tr>
				<tr>
					<td>
						<div class="columnLeft">
								<label>Machine State: </label><span id="machineState-status">updating</span><br />
								<label>Last Machine State: </label><span id="lastMachineState-status">updating</span><br />
								<label>Motor 1 Power: </label><span id="m1Power-status">updating</span><br />
								<label>Motor 2 Power: </label><span id="m2Power-status">updating</span><br />
								<label>Motor 1 Position: </label><span id="m1Position-status">updating</span><br />
								<label>Motor 2 Position: </label><span id="m2Position-status">updating</span><br />
								<label>Motor 1 Flipped: </label><span id="m1Flipped-status">updating</span><br />
								<label>Motor 2 Flipped: </label><span id="m2Flipped-status">updating</span><br />
								<label>Motor 1 Offset: </label><span id="m1Offset-status">updating</span><br />
								<label>Motor 2 Offset: </label><span id="m2Offset-status">updating</span><br />
								<label>Pump Speed: </label><span id="mPumpSpeed-status">updating</span><br />
								<!--label>Motor 1 Speed: </label><span id="m1Speed-status">updating</span><br /-->
								<!--label>Motor 2 Speed: </label><span id="m2Speed-status">updating</span><br /-->
								<label>Current Time: </label><span id="tCurrent-status">updating</span><br />
								<label>State End Time: </label><span id="tFinal-status">updating</span><br />
								<label>Startup Duration: </label><span id="startupDuration-status">updating</span><br />
								<label>Open Duration: </label><span id="openDuration-status">updating</span><br />
								<label>Open Hold Duration: </label><span id="openHoldDuration-status">updating</span><br />
								<label>Close Duration: </label><span id="closeDuration-status">updating</span><br />
								<label>Close Hold Duration: </label><span id="closeHoldDuration-status">updating</span><br />
								<label>Target Open: </label><span id="targetOpen-status">updating</span><br />
								<label>Target Close: </label><span id="targetClose-status">updating</span><br />
								<label>Target: </label><span id="target-status">updating</span><br />
								<label>Progress: </label><span id="progress-status">updating</span><br />
								<label>Last Progress: </label><span id="lastProgress-status">updating</span><br />
								<label>Sigmoid Function: </label><span id="sigmoidFunction-status">updating</span><br />
								<label>Loop Delay: </label><span id="loopDelay-status">updating</span><br />
						</div>
					</td>
					<td>
						<div class="columnRight">
							<label>Go To:</label><br/>
							<button id="open">OPEN</button>
							<button id="close">CLOSE</button>
							<button id="pause">PAUSE</button>
							<button id="resume">RESUME</button>
							<hr>
							<label >Motor 1 Flipped:</label><input type="checkbox" id="m1Flipped"><br />
							<label >Motor 2 Flipped:</label><input type="checkbox" id="m2Flipped"><br />
							<label>Motor 1 Offset: </label><input type="number" id="m1Offset" min="-250" max="250" /><br />
							<label>Motor 2 Offset: </label><input type="number" id="m2Offset"  min="-250" max="250" /><br />
							
							<label >Pump Speed:</label><input type="number" id="mPumpSpeed" min="0.0" max="1.0"><br />
							<label>Startup Duration: </label><input type="number" id="startupDuration" min="5.0" max="60.0" /><br />
							<label>Open Duration: </label><input type="number" id="openDuration" min="5.0" max="30.0" /><br />
							<label>Open Hold Duration: </label><input type="number" id="openHoldDuration" min="5.0" max="30.0" /><br />
							<label>Close Duration: </label><input type="number" id="closeDuration" min="5.0" max="30.0" /><br />
							<label>Close Hold Duration: </label><input type="number" id="closeHoldDuration" min="5.0" max="30.0" /><br />
							<label>Target Open: </label><input type="number" id="targetOpen" min="0" max="8400" /><br />
							<label>Target Close: </label><input type="number" id="targetClose" min="-500" max="1000" /><br />
							<label>Sigmoid Function:</label>
							<select id="sigmoidFunction" value=2>
								<option value=0>Natural Log</option>
								<option value=1>Arctan</option>
								<option value=2>Sine Squared</option>
							</select><br />
							<label>Power Multiplier: </label><input id="powerScalar" type="number" min="0.5" max="5.0" size=8/><br />
							<label>Power Easing: </label><input id="powerEasing" type="number" min="0.1" max="1.0" size=8 /><br />
							<label>Power Limit: </label><input id="powerLimit" type="number" min="0" max="480" size=8 /><br />
							<label>Loop Delay: </label><input type="number" id="loopDelay" min="0.005" max=".025" />
							<hr>
							<div>
								<p><span class="warning">WARNING:</span></p>
								<p>
									Before making changes to settings using the buttons below, you MUST click the <code>CLOSE</code> button above, and then when the "Machine State" reaches <code>HOLDING CLOSED</code>, press PAUSE.
								</p>
								<p>
									Unless the "Machine State" is <code>PAUSED</code> and the "Last Machine State" is <code>HOLDING CLOSED</code> or <code>STARTUP</code>, damage to the sculpture can occur when applying settings.
								</p>
							</div>
							<hr>
							<p>
								<button id="apply" class="applyButton">Apply Settings</button><span id="apply-status"></span>
							</p>
							<p>
								<button id="saveSettings">Save Applied/Current Settings</button><br />
								<button id="loadSettings">Load Last Saved Settings</button>
							</p>
							<p>
								<button id="loadDefaults">Load Default Settings</button><br />
								<button id="saveDefaults">Write Applied/Current Settings to Default</button>
							</p>
						</div>
					</td>
				</tr>

			</table>

			<hr />
			Websocket status:
			<br />
			<div id="ws-status">Waiting...</div>
		</div>
	</body>
</html>
